(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[0],{157:function(e,t,a){e.exports=a(281)},192:function(e,t){},194:function(e,t){},205:function(e,t){},207:function(e,t){},232:function(e,t){},234:function(e,t){},235:function(e,t){},241:function(e,t){},243:function(e,t){},261:function(e,t){},263:function(e,t){},275:function(e,t){},278:function(e,t){},281:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(36),o=a.n(r),c=a(12),s=a(13),i=a(15),m=a(14),u=(a(162),a(287)),p=a(288),d=a(22),g=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return l.a.createElement(u.a,{expand:"lg",variant:"light",className:"p-3 navbar"},l.a.createElement(u.a.Brand,{href:"/reactblog/",className:"ml-5"}," ",l.a.createElement("strong",null,"DevBlogs")),l.a.createElement(u.a.Toggle,{"aria-controls":"basic-navbar-nav"}),l.a.createElement(u.a.Collapse,{id:"basic-navbar-nav"},localStorage.getItem("userData")?l.a.createElement(p.a,{className:"ml-auto"},l.a.createElement(d.b,{to:"/profile",className:"nav-link"},"Profile"),l.a.createElement(d.b,{to:"/new",className:"nav-link"},"Add Post")):l.a.createElement(p.a,{className:"ml-auto"},l.a.createElement(d.b,{to:"/login",className:"nav-link"},"Login"))))}}]),a}(l.a.Component),E=a(37),h=a.n(E),b=a(55),f=a(56),v=(a(169),a(16)),N=a.n(v),y=a(45),k=a(46),w=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(e){return Object(c.a)(this,a),t.call(this,e)}return Object(s.a)(a,[{key:"likPost",value:function(e){var t=e.target.id;N.a.post("http://localhost:5000/post/like/uid/".concat(t),{id:JSON.parse(localStorage.getItem("userData")).uid}).then((function(e){200===e.status&&(window.location="/")})).catch((function(e){console.log(e)}))}},{key:"unlikePost",value:function(e){var t=e.target.id;N.a.post("https://desolate-reaches-85560.herokuapp.com/post/dislike/uid/".concat(t),{id:JSON.parse(localStorage.getItem("userData")).uid}).then((function(e){200===e.status&&(window.location="/reactblog/")})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("div",{className:"card mb-4",style:{maxWidth:"550px",margin:"auto",minHeight:"300px"}},l.a.createElement("img",{src:"https://source.unsplash.com/random/".concat(this.props.tags[0]),className:"card-img-top",alt:"image"+this.props.id}),l.a.createElement("div",{className:"card-body"},l.a.createElement("h1",{className:"card-title text-primary"},this.props.title),l.a.createElement("p",{className:"text-muted"},this.props.content),l.a.createElement("small",null,"by :",this.props.postBy),l.a.createElement("br",null),l.a.createElement("span",null,"Published at:"),l.a.createElement("strong",null," ",new Date(this.props.pubAt).toLocaleString()),this.props.likes>0?l.a.createElement("p",{className:"text-muted"},this.props.likedBy.length>1?this.props.likedBy[0]+" and "+this.props.likedBy.filter((function(t){return t!==e.props.likedBy[0]})).length+" others likes this post":this.props.likedBy[0]+" like this post"):null,l.a.createElement("p",null," ",null!==localStorage.getItem("userData")?this.props.likedBy.includes(JSON.parse(localStorage.getItem("userData")).name)?l.a.createElement("button",{className:"btn btn-link btn-sm ml-0",id:this.props.id,onClick:this.unlikePost},"Unlike"):l.a.createElement("button",{className:"btn btn-link btn-sm ml-0",onClick:this.likPost,id:this.props.id},"Like"):null,l.a.createElement(y.a,{icon:k.a,color:"red"})," ",this.props.likes),l.a.createElement("strong",null,"Tags:"),this.props.tags.map((function(e){return e+","})),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-10"},l.a.createElement("input",{type:"text",className:"form-control",placeholder:"add comment",style:{borderBottom:"1px solid",borderRadius:"0px"}})),l.a.createElement("div",{className:"col-lg-2"},l.a.createElement("button",{className:"btn btn-dark"},l.a.createElement(y.a,{icon:k.b,color:"white"})))))))}}]),a}(l.a.Component),O=function(){var e=Object(n.useState)([]),t=Object(f.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){(function(){var e=Object(b.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N()("https://desolate-reaches-85560.herokuapp.com");case 2:t=e.sent,r(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),l.a.createElement("div",null,l.a.createElement("div",{className:"container-fluid",style:{marginTop:"100px"}},a.length>0?a.map((function(e){return l.a.createElement(w,{key:e._id,id:e._id,title:e.title,content:e.content,pubAt:e.createdAt,likes:e.likes,tags:e.tags,likedBy:e.likedBy,postBy:e.publishedBy})})):null))},S=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(O,null))}}]),a}(l.a.Component),j=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("h1",null,"About Page"))}}]),a}(l.a.Component),x=a(8),C=a(283),D=a(284),I=a(155),P=a(286),B=a(285),L=a(16),J=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return localStorage.getItem("userData")?l.a.createElement(x.a,{to:{pathname:"/reactblog/",state:{from:this.props.location}}}):l.a.createElement("div",null,l.a.createElement(C.a,null,l.a.createElement(D.a,{style:{margin:"150px 0"}},l.a.createElement(I.a,{className:"col-lg-6",style:{maxWidth:"950px",margin:"auto",minHeight:"400px"}},l.a.createElement("h1",{className:"display-3"},"Login"),l.a.createElement(P.a,null,l.a.createElement(P.a.Group,{controlId:"formBasicEmail"},l.a.createElement(P.a.Label,null,"Email address"),l.a.createElement(P.a.Control,{type:"email",placeholder:"Enter email",name:"email"})),l.a.createElement(P.a.Group,{controlId:"formBasicPassword"},l.a.createElement(P.a.Label,null,"Password"),l.a.createElement(P.a.Control,{type:"password",placeholder:"Password",name:"password"})),l.a.createElement(B.a,{variant:"dark",className:"btn-md",onClick:function(e){var t=e.target.parentElement,a=t.email.value,n=t.password.value;if(a&&n){var l={email:a,password:n};L.post("https://desolate-reaches-85560.herokuapp.com/login",l).then((function(e){if(e.data.success){var t=e.data.data.userData;console.log(t),t.isVerified?(console.log("User All Checkpoint Completed!"),localStorage.setItem("userData",JSON.stringify(t)),window.location="/reactblog/"):console.log("User Email is Not Verified")}else alert("Login Failed!")})).catch((function(e){console.log(e)}))}else alert("Empty Fields!")}},"Login"),l.a.createElement(d.b,{to:"/register",variant:"dark",type:"submit",className:"btn btn-md btn-dark ml-2"},"Register"))))))}}]),a}(l.a.Component),A=a(187),T=a(16),W=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return localStorage.getItem("userData")?l.a.createElement(x.a,{to:{pathname:"/",state:{from:this.props.location}}}):l.a.createElement("div",null,l.a.createElement(C.a,null,l.a.createElement(D.a,{style:{margin:"150px 0"}},l.a.createElement(I.a,{className:"col-lg-6",style:{maxWidth:"950px",margin:"auto",minHeight:"400px"}},l.a.createElement("h1",{className:"display-2"},"Signup"),l.a.createElement(P.a,null,l.a.createElement(P.a.Group,{controlId:"formFname"},l.a.createElement(P.a.Label,null,"Full Name"),l.a.createElement(P.a.Control,{type:"text",placeholder:"Full Name",autoComplete:"false",name:"first_name"})),l.a.createElement(P.a.Group,{controlId:"formBasicEmail"},l.a.createElement(P.a.Label,null,"Email address"),l.a.createElement(P.a.Control,{type:"email",placeholder:"Enter email",name:"email"})),l.a.createElement(P.a.Group,{controlId:"formBasicPassword"},l.a.createElement(P.a.Label,null,"Password"),l.a.createElement(P.a.Control,{type:"password",placeholder:"Password",name:"password1"})),l.a.createElement(P.a.Group,{controlId:"formBasicPassword2"},l.a.createElement(P.a.Label,null,"Confirm Password"),l.a.createElement(P.a.Control,{type:"password",placeholder:"Confirm Password",name:"password2"})),l.a.createElement(B.a,{variant:"dark",onClick:function(e){var t=e.target.parentElement,a=t.first_name.value,n=t.email.value,l=t.password1.value,r=t.password2.value;if(a&&n&&l&&r)if(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(n))if(l!==r)console.log("make sure two Password Matched!");else{console.log("All correct! now proceed");A.genSalt(10,(function(e,t){A.hash(l,A.genSaltSync(10),(function(e,t){var l={name:a,email:n,password:t};T.post("https://desolate-reaches-85560.herokuapp.com/register",l).then((function(e){e.data?window.location="/reactblog/login":alert("Something Wrong With Server!")})).catch((function(e){console.log(e)}))}))}))}else console.log("Bad email");else console.log("All Fields Required")}},"Register"))))))}}]),a}(l.a.Component),F=a(156),G=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"removePost",value:function(e){var t=e.target.parentElement.children[0].value;N.a.post("https://desolate-reaches-85560.herokuapp.com/post/remove/",{pid:t}).then((function(e){200===e.status&&alert("Post removed successfully")})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("div",{className:"card mb-5"},l.a.createElement("div",{className:"card-body"},l.a.createElement("h1",{className:"card-title"},this.props.title),l.a.createElement("p",{className:"text-muted"},this.props.content),l.a.createElement("span",null,"Published at:"),l.a.createElement("strong",null," ",new Date(this.props.pubAt).toLocaleString()),l.a.createElement("i",{className:"fa fa-like"}),l.a.createElement("p",null,"  ",l.a.createElement(y.a,{icon:k.a,color:"red"})," ",this.props.likes),l.a.createElement("strong",null,"Tags:"),this.props.tags.map((function(e){return e+","})),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement("input",{type:"hidden",value:this.props.id,id:this.props.id}),l.a.createElement("button",{className:"btn btn-danger btn-sm ml-0",onClick:this.removePost},"Remove")))))}}]),a}(l.a.Component),_=function(e){e.component;var t=Object(F.a)(e,["component"]);function a(){var e=document.querySelector(".name").textContent,t=JSON.parse(localStorage.getItem("userData")).uid;N.a.post("https://desolate-reaches-85560.herokuapp.com/profile/update/uid/".concat(t),{name:e,id:t}).then((function(e){var t=e.data.data.userData;return localStorage.setItem("userData",JSON.stringify(t)),l.a.createElement(x.b,null,l.a.createElement(x.a,{to:"/profile"}))})).catch((function(e){console.log(e)}))}var r=Object(n.useState)([]),o=Object(f.a)(r,2),c=o[0],s=o[1];return Object(n.useEffect)((function(){(function(){var e=Object(b.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N()("https://desolate-reaches-85560.herokuapp.com/userpost/uid/".concat(JSON.parse(localStorage.getItem("userData")).uid));case 2:t=e.sent,s(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),l.a.createElement(x.b,Object.assign({},t,{render:function(e){return localStorage.getItem("userData")?l.a.createElement("div",{className:"container mt-5"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-1"},l.a.createElement("img",{src:"https://avatars.dicebear.com/api/initials/"+JSON.parse(localStorage.getItem("userData")).name+".svg",alt:"avatar",className:"rounded-circle img-fluid",width:"75",height:"75"})),l.a.createElement("div",{className:"col-lg-6"},l.a.createElement("p",{className:"text-muted display-4 name",contentEditable:"true",suppressContentEditableWarning:!0},JSON.parse(localStorage.getItem("userData")).name))),l.a.createElement("p",{className:"text-muted"},JSON.parse(localStorage.getItem("userData")).uemail),l.a.createElement("p",{className:"text-muted"},"Last updated ",new Date(JSON.parse(localStorage.getItem("userData")).lastupdated).toLocaleString()),l.a.createElement("button",{className:"btn btn-danger",onClick:function(){localStorage.clear(),e.history.push("/reactblog/login"),window.location.reload(!1)}},"Logout"),l.a.createElement("button",{className:"btn btn-primary ml-4",onClick:a},"Edit Name"),l.a.createElement("br",null),l.a.createElement("h1",{className:"display-6 mt-4"},"Your Posts"),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-12"},c.map((function(e){return l.a.createElement(G,{key:e._id,id:e._id,title:e.title,content:e.content,pubAt:e.createdAt,likes:e.likes,tags:e.tags,postBy:e.publishedBy})}))))):l.a.createElement(x.a,{to:{pathname:"/reactblog/login",state:{from:e.location}}})}}))},q=function(e){if(localStorage.getItem("userData")){return l.a.createElement("div",null,l.a.createElement("div",{className:"container-fluid mt-5"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-8 col-md-offset-2",style:{maxWidth:"950px",margin:"auto",minHeight:"400px"}},l.a.createElement("h1",{className:"display-1"},"Create post"),l.a.createElement("form",{method:"POST",onSubmit:function(t){t.preventDefault();var a=t.target,n=a.title.value,l=a.description.value,r=a.tags.value;if(0===n.length&&0===l.length&&0===r.length)alert("Make sure to add title and description!");else{var o={title:n,description:l,tags:r};N.a.post("https://desolate-reaches-85560.herokuapp.com/new/uid/".concat(JSON.parse(localStorage.getItem("userData")).uid),o).then((function(t){200===t.status&&e.history.push("/reactblog/")})).catch((function(e){console.log(e)}))}}},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Title ",l.a.createElement("span",{className:"require"},"*")),l.a.createElement("input",{type:"text",className:"form-control",name:"title"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Description ",l.a.createElement("span",{className:"require"},"*")),l.a.createElement("textarea",{rows:"5",className:"form-control",name:"description"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Tags ",l.a.createElement("span",{className:"require"},"*")),l.a.createElement("input",{type:"text",className:"form-control",name:"tags",placeholder:"Add appropriate tags"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("button",{type:"submit",className:"btn btn-dark"},"Create"),l.a.createElement(d.b,{className:"btn btn-default",to:"/profile"},"Cancel")))))))}return window.location="/login"},R=function(e){Object(i.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return l.a.createElement(d.a,null,l.a.createElement("div",null,l.a.createElement(g,null),l.a.createElement(x.d,null,l.a.createElement(x.b,{path:"/reactblog/",exact:!0,component:S}),l.a.createElement(x.b,{path:"/reactblog/about",component:j}),l.a.createElement(x.b,{path:"/reactblog/login",component:J}),l.a.createElement(x.b,{path:"/reactblog/register",component:W}),l.a.createElement(x.b,{path:"/reactblog/profile",component:_}),l.a.createElement(x.b,{path:"/reactblog/new",component:q}))))}}]),a}(l.a.Component);o.a.render(l.a.createElement("div",null,l.a.createElement(R,null)),document.getElementById("root"))}},[[157,1,2]]]);
//# sourceMappingURL=main.58825306.chunk.js.map